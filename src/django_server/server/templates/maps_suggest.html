{% extends "layout.html" %}
{% block content %} 
<div id="logo">
<h1>G Explore</h1>
</div>
<div id="search-container">
  <input id="search-input" type="text" />
  <script type="text/javascript">
    var service = new google.maps.places.AutocompleteService();
    $( "#search-input" ).autocomplete({
      source: function(request, response) {
        var search_params = {input: request.term, types: ['(regions)']}           
        service.getPlacePredictions(search_params, function(data) {
          if (data == null) {
            return response([])
          }          
          return response($.map(data, function(item) {
            return {
              'data': item,
              'query': request.term,
              'label': item.description,
              'value': item.description
            }
          }));
      })},
      select: function(e, ui) {
        load_page(ui.item);
      }
    }).data("ui-autocomplete")._renderItem = function (ul, item) {
      return $("<li></li>")
        .data("item.autocomplete", item)
        .append(format_result(item))
        .appendTo(ul);
    };

    function format_result(item) {
      var result = '<span class="maps-suggest-title">' +  item.data.terms[0].value + '</span>';
      for (var i = 1; i < item.data.terms.length; i++) {
        result += '<span class="maps-suggest-details">' +  item.data.terms[i].value + '</span>';
      }
      return result
    }

    function load_page(place) {
      console.log(place)
    }
  </script>      
</div> 
{% endblock %} 